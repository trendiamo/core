<section class="section section--account account account--register">
    <div class="container container--tiny">

        <div class="section__title section__title--center">
            <h1 class="section__title-text h2">{{ 'customer.register.title' | t }}</h1>
        </div>

        <div class="account__form">
            {% form 'create_customer' %}

                {{ form.errors | default_errors }}

                <div autofocus class="selector-wrapper">
                  <select id="login-system-select">
                    <option value="" hidden>Choose your account type...</option>
                    <option value="customer">I'm a customer</option>
                    <option value="brand">I'm a brand</option>
                  </select>
                </div>

                <div class="o-layout">
                    <div class="o-layout__item u-1/1 u-1/2@tab">
                        <label for="FirstName" class="hidden-label">{{ 'customer.register.first_name' | t }}</label>
                        <input required type="text" name="customer[first_name]" id="FirstName" {% if form.first_name %}value="{{ form.first_name }}"{% endif %} autocapitalize="words">
                    </div>
                    <div class="o-layout__item u-1/1 u-1/2@tab">
                        <label for="LastName" class="hidden-label">{{ 'customer.register.last_name' | t }}</label>
                        <input required type="text" name="customer[last_name]" id="LastName" {% if form.last_name %}value="{{ form.last_name }}"{% endif %} autocapitalize="words">
                    </div>
                </div>

                <label for="rEmail" class="hidden-label">{{ 'customer.register.email' | t }}</label>
                <input required type="email" name="customer[email]" id="rEmail" class="{% if form.errors contains 'email' %} error{% endif %}" {% if form.email %} value="{{ form.email }}"{% endif %} autocorrect="off" autocapitalize="off">

                <label for="CreatePassword" class="hidden-label">{{ 'customer.register.password' | t }}</label>
                <input required type="password" name="customer[password]" id="CreatePassword" class="{% if form.errors contains 'password' %} error{% endif %}">

                <label for="ConfirmPassword" class="hidden-label">{{ 'customer.register.confirm_password' | t }}</label>
                <input required type="password" name="customer[confirm_password]" id="ConfirmPassword">

                <label for="CustomerFormNewsletter">Would you like to signup to our awesome newsletter?</label><br>
                <input type="checkbox" id="CustomerFormNewsletter" name="customer[note][Newsletter]" value="Yes, please!" /> Yes, please!

                <div class="account__form-buttons">
                    <input type="submit" class="c-btn c-btn--primary account__form-submit" value="{{ 'customer.register.submit' | t }}">
                    <a href="{{ shop.url }}" class="link account__form-secondary-btn">{{ 'customer.register.cancel' | t }}</a>
                </div>

            {% endform %}
        </div>

    </div>
</section>

<script>
function disableForm() {
  $('#create_customer input').prop('disabled', true);
}

function enableForm() {
  $('#create_customer input').removeProp('disabled');
}

if (window.location.hash == '#customer') {
  $('#create_customer select').val('customer');
} else {
  disableForm();
  $('#create_customer select').change(function(e) {
    if (e.target.value === 'customer') {
      enableForm();
      $('#FirstName').focus();
    }
  });
}

$('form#create_customer').submit(function(e) {
  if ($('#CreatePassword').val() !== $('#ConfirmPassword').val()) {
    $('#CreatePassword, #ConfirmPassword').addClass('error');
    e.preventDefault();
  }
});
</script>
