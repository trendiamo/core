{% if product.handle == "bikini" %}
  <div class="cover">
    <div class="collection-meta">
      <img class="collection-meta-img" src="{{ product.image | img_url: 'medium' }}" />
      <div class="collection-meta-title">Albert Periago</div>
      <div class="collection-meta-description">I am a really nice person.</div>
    </div>
    <div class="cover-cta-wrapper">
      <div class="cover-cta">
        {%- include 'arrow-down' -%}
      </div>
    </div>
    <div class="opener-text">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce metus nunc, pulvinar eget enim vel, facilisis rutrum sem. Integer tristique ornare gravida. Vestibulum pharetra facilisis quam, vitae faucibus mauris condimentum non. Pellentesque neque ligula, gravida sed risus eget, facilisis pulvinar leo.</p>
    </div>
  </div>
{% endif %}

{% if product.handle == "product2" %}
  <div class="cover">
    <div class="collection-meta">
      <img class="collection-meta-img" src="{{ product.image | img_url: 'medium' }}" />
      <div class="collection-meta-title">Marc Roca</div>
      <div class="collection-meta-description">I am a really nice person too.</div>
    </div>
    <div class="cover-cta-wrapper">
      <div class="cover-cta">
        {%- include 'arrow-down' -%}
      </div>
    </div>
    <div class="opener-text">
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce metus nunc, pulvinar eget enim vel, facilisis rutrum sem. Integer tristique ornare gravida. Vestibulum pharetra facilisis quam, vitae faucibus mauris condimentum non. Pellentesque neque ligula, gravida sed risus eget, facilisis pulvinar leo.</p>
    </div>
  </div>
{% endif %}

<style>
  .site-header {
    position: relative !important;
    border-radius: 0;
  }

  .cover {
    position: relative;
    width: 100vw;
    height: 100vh;
    background-image: url("https://wallpaperclicker.com/storage/wallpaper/COOL-WALLPAPER-7037-21909636.jpg");
    background-size: cover;
    padding: 20px;
  }

  .collection-meta {
    display: inline-block;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    height: 80px;
    border-radius: 10px;
  }

  .collection-meta-img {
    float: left;
    width: 60px;
    border-radius: 100px;
  }

  .collection-meta-title {
    color: white;
    font-size: 20px;
    font-weight: bold;
    padding-right: 10px;
    margin-left: 80px;
  }

  .collection-meta-description {
    color: white;
    padding-right: 10px;
    margin-left: 80px;
  }

  .cover-cta-wrapper {
    position: absolute;
    bottom: 20px;
    left: 0;
    right: 0;
    margin: 0 auto;
    text-align: center;
    transition: bottom 0.5s;
  }

  .cover-cta-wrapper:hover {
    bottom: 30px;
  }

  .cover-cta {
    display: inline-block;
    width: 50px;
    height: 50px;
    -webkit-filter: drop-shadow(5px 5px 5px #222 );
    filter: drop-shadow(5px 5px 5px #222);
  }

  .cover-cta:hover {
    cursor: pointer;
  }

  .opener-text {
    position: absolute;
    right:40px;
    bottom: 200px;
    height: auto;
    width: 400px;
    padding: 20px;
    background: rgba(0, 0, 0, 0.5);
  }

  .opener-text p {
    color: white;
  }

  .logo {
    width: 64px !important;
    height: 64px;
  }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
  $( ".cover-cta" ).click(function() {
    $("html, body").animate({ scrollTop: $("#pdp-top").offset().top }, "slow");
  });
</script>

{% if section.settings.message %}
  <style>
    .notification-bar {
      background-color: {{ section.settings.color_bg }};
    }

    .notification-bar__message {
      color: {{ section.settings.color_text }};
    }

    {% if section.settings.logo != blank %}
      .site-header__logo-image {
        max-width: {{ section.settings.logo_max_width | escape }}px;
      }
    {% endif %}

    {% if section.settings.align_logo == 'left' %}
      .site-header__logo-image {
        margin: 0;
      }
    {% endif %}
  </style>
{% endif %}

<div data-section-id="{{ section.id }}" data-section-type="header-section">
  {% include 'back-button' %}
  <nav class="mobile-nav-wrapper medium-up--hide" role="navigation">
  <ul id="MobileNav" class="mobile-nav">
    {% for link in linklists[section.settings.main_linklist].links %}
      {%- assign outerLoopIndex = forloop.index -%}

      <li class="mobile-nav__item{% unless forloop.last %} border-bottom{% endunless %}">
        {% if link.links != blank %}
          {% capture child_list_handle %}{{ link.handle }}-{{ outerLoopIndex }}{% endcapture %}
          <button type="button" class="btn--link js-toggle-submenu mobile-nav__link" data-target="{{ child_list_handle }}" data-level="1">
            {{ link.title }}
            <div class="mobile-nav__icon">
              {% include 'icon-chevron-right' %}
              <span class="icon__fallback-text">{{ 'layout.navigation.expand' | t }}</span>
            </div>
          </button>
          <ul class="mobile-nav__dropdown" data-parent="{{ child_list_handle }}" data-level="2">
            <li class="mobile-nav__item border-bottom">
              <div class="mobile-nav__table">
                <div class="mobile-nav__table-cell mobile-nav__return">
                  <button class="btn--link js-toggle-submenu mobile-nav__return-btn" type="button">
                    {% include 'icon-chevron-left' %}
                    <span class="icon__fallback-text">{{ 'layout.navigation.collapse' | t }}</span>
                  </button>
                </div>
                <a href="{{ link.url }}" class="mobile-nav__sublist-link mobile-nav__sublist-header"{% if link.active %} aria-current="page"{% endif %}>
                  {{ link.title }}
                </a>
              </div>
            </li>

            {% for childlink in link.links %}
              <li class="mobile-nav__item{% unless forloop.last %} border-bottom{% endunless %}">
                {% if childlink.links != blank %}
                  {% capture grandchild_list_handle %}{{ childlink.handle }}-{{ outerLoopIndex }}-{{ forloop.index }}{% endcapture %}
                  <button type="button" class="btn--link js-toggle-submenu mobile-nav__link mobile-nav__sublist-link" data-target="{{ grandchild_list_handle }}">
                    {{ childlink.title }}
                    <div class="mobile-nav__icon">
                      {% include 'icon-chevron-right' %}
                      <span class="icon__fallback-text">{{ 'layout.navigation.expand' | t }}</span>
                    </div>
                  </button>
                  <ul class="mobile-nav__dropdown" data-parent="{{ grandchild_list_handle }}" data-level="3">
                    <li class="mobile-nav__item border-bottom">
                      <div class="mobile-nav__table">
                        <div class="mobile-nav__table-cell mobile-nav__return">
                          <button type="button" class="btn--link js-toggle-submenu mobile-nav__return-btn" data-target="{{ child_list_handle }}">
                            {% include 'icon-chevron-left' %}
                            <span class="icon__fallback-text">{{ 'layout.navigation.collapse' | t }}</span>
                          </button>
                        </div>
                        <a href="{{ childlink.url }}" class="mobile-nav__sublist-link mobile-nav__sublist-header"{% if childlink.active %} aria-current="page"{% endif %}>
                          {{ childlink.title }}
                        </a>
                      </div>
                    </li>
                    {% for grandchildlink in childlink.links %}
                      <li class="mobile-nav__item{% unless forloop.last %} border-bottom{% endunless %}">
                        <a href="{{ grandchildlink.url }}" class="mobile-nav__sublist-link"{% if grandchildlink.active %} aria-current="page"{% endif %}>
                          {{ grandchildlink.title | escape }}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <a href="{{ childlink.url }}" class="mobile-nav__sublist-link"{% if childlink.active %} aria-current="page"{% endif %}>
                    {{ childlink.title | escape }}
                  </a>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <a href="{{ link.url }}" class="mobile-nav__link"{% if link.active %} aria-current="page"{% endif %}>
            {{ link.title }}
          </a>
        {% endif %}
      </li>
    {% endfor %}
    {% if shop.customer_accounts_enabled %}
      {% if customer %}
        <li class="mobile-nav__item border-top">
          <a href="/account" class="mobile-nav__link">{{ 'layout.customer.account' | t }}</a>
        </li>
      {% else %}
        <li class="mobile-nav__item border-top">
          <a href="/account/login" class="mobile-nav__link">{{ 'layout.customer.log_in' | t }}</a>
        </li>
      {% endif %}
    {% endif %}
  </ul>
  </nav>

  {% if section.settings.message %}
    {% if section.settings.home_page_only == false or template.name == 'index' %}
      <style>
        .announcement-bar {
          background-color: {{ section.settings.color_bg }};
        }

        .announcement-bar--link:hover {
          {% assign brightness = section.settings.color_bg | color_brightness %}

          {% if brightness <= 192 %}
            {% assign lightenAmount = 255 | minus: brightness | divided_by: 255 | times: 16 %}
            background-color: {{ section.settings.color_bg | color_lighten: lightenAmount }};
          {% else %}
            {% assign darkenAmount = 255 | divided_by: brightness | times: 8 %}
            background-color: {{ section.settings.color_bg | color_darken: darkenAmount }};
          {% endif %}
        }

        .announcement-bar__message {
          color: {{ section.settings.color_text }};
        }
      </style>

      {% if section.settings.message_link == blank %}
        <div class="announcement-bar">
      {% else %}
        <a href="{{ section.settings.message_link }}" class="announcement-bar announcement-bar--link">
      {% endif %}

        <p class="announcement-bar__message">{{ section.settings.message_text | escape }}</p>

      {% if section.settings.message_link == blank %}
        </div>
      {% else %}
        </a>
      {% endif %}

    {% endif %}
  {% endif %}

  <header id="pdp-top" class="site-header{% if section.settings.align_logo == 'left' %} border-bottom logo--left{% else %} logo--center{% endif %}" role="banner">
    <div class="grid grid--no-gutters grid--table">
      {% if section.settings.align_logo == 'center' %}
        <div class="grid__item small--hide medium-up--one-third">
        </div>
      {% endif %}

      {% if section.settings.align_logo == 'center' %}
        {%- assign logo_classes = 'medium-up--one-third logo-align--center' -%}
      {% else %}
        {%- assign logo_classes = 'medium-up--one-quarter logo-align--left' -%}
      {% endif %}

      <div class="grid__item small--one-half {{ logo_classes }}">
        {% comment %}
          Use the uploaded logo from theme settings if enabled.
          Site name gets precedence with H1 tag on homepage, div on other pages.
        {% endcomment %}
        {% if template.name == 'index' %}
          <h1 class="h2 site-header__logo" itemscope itemtype="http://schema.org/Organization">
        {% else %}
          <div class="h2 site-header__logo" itemscope itemtype="http://schema.org/Organization">
        {% endif %}
          {% if section.settings.logo %}
            {%- assign img_url = section.settings.logo | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
            <a href="/" itemprop="url" class="site-header__logo-image{% if section.settings.align_logo == 'center' %} site-header__logo-image--centered{% endif %}">
              {% capture logo_alt %}{{ section.settings.logo.alt | default: shop.name }}{% endcapture %}
              {% if product.handle == "bikini" %}
              <img class="logo" src="https://wallpaperclicker.com/storage/wallpaper/COOL-WALLPAPER-7037-21909636.jpg" />
              {% endif %}
              {% if product.handle == "product2" %}
              <img class="logo" src="https://wallpaperclicker.com/storage/wallpaper/COOL-WALLPAPER-7037-21909636.jpg" />
              {% endif %}
            </a>
          {% else %}
            <a class="site-header__logo-link" href="/" itemprop="url">{{ shop.name }}</a>
          {% endif %}
        {% if template.name == 'index' %}
          </h1>
        {% else %}
          </div>
        {% endif %}
      </div>

      {% if section.settings.align_logo == 'left' %}
        <nav class="grid__item medium-up--one-half small--hide" id="AccessibleNav" role="navigation">
          {% include 'site-nav' %}
        </nav>
      {% endif %}

      <div class="grid__item small--one-half {% if section.settings.align_logo == 'left' %}medium-up--one-quarter{% else %}medium-up--one-third{% endif %} text-right site-header__icons{% if shop.customer_accounts_enabled %} site-header__icons--plus{% endif %}">
        <div class="site-header__icons-wrapper">
          {% if section.settings.align_logo == 'left' %}
          {% endif %}

          {% if shop.customer_accounts_enabled %}
            {% if customer %}
              <a href="/account" class="site-header__account">
                {% include 'icon-login' %}
                <span class="icon__fallback-text">{{ 'layout.customer.account' | t }}</span>
              </a>
            {% else %}
              <a href="/account/login" class="site-header__account">
                {% include 'icon-login' %}
                <span class="icon__fallback-text">{{ 'layout.customer.log_in' | t }}</span>
              </a>
            {% endif %}
          {% endif %}

          <a href="/cart" class="site-header__cart">
            {% include 'icon-cart' %}
            <span class="visually-hidden">{{ 'layout.cart.title' | t }}</span>
            <span class="icon__fallback-text">{{ 'layout.cart.title' | t }}</span>
            {% if cart.item_count > 0 %}
              <div id="CartCount" class="site-header__cart-count">
                <span>{{ cart.item_count }}</span>
                <span class="icon__fallback-text medium-up--hide">{{ 'layout.cart.items_count' | t: count: cart.item_count }}</span>
              </div>
            {% endif %}
          </a>

          {% unless linklists[section.settings.main_linklist] == blank %}
            <button type="button" class="btn--link site-header__menu js-mobile-nav-toggle mobile-nav--open">
              {% include 'icon-hamburger' %}
              {% include 'icon-close' %}
              <span class="icon__fallback-text">{{ 'layout.navigation.toggle' | t }}</span>
            </button>
          {% endunless %}
        </div>

      </div>
    </div>
  </header>

  {% if section.settings.align_logo == 'center' %}
  <nav class="small--hide" id="AccessibleNav" role="navigation">
    {% include 'site-nav', nav_alignment: 'site-nav--centered' %}
  </nav>
  {% endif %}
</div>

{% schema %}
  {
    "name": "Header",
    "settings": [
      {
        "type": "radio",
        "id": "align_logo",
        "label": "Logo alignment",
        "default": "left",
        "options": [
          {"value": "left", "label": "Left"},
          {"value": "center", "label": "Centered"}
        ]
      },
      {
        "type": "image_picker",
        "id": "logo",
        "label": "Logo image"
      },
      {
        "type": "text",
        "id": "logo_max_width",
        "label": "Custom logo width (in pixels)",
        "default": "100"
      },
      {
        "type": "link_list",
        "id": "main_linklist",
        "label": "Menu",
        "default": "main-menu"
      },
      {
        "type": "header",
        "content": "Announcement bar"
      },
      {
        "type": "checkbox",
        "id": "message",
        "label": "Show announcement",
        "default": false
      },
      {
        "type": "checkbox",
        "id": "home_page_only",
        "label": "Home page only",
        "default": true
      },
      {
        "type": "text",
        "id": "message_text",
        "label": "Announcement text",
        "default": "Announce something here"
      },
      {
        "type": "url",
        "id": "message_link",
        "label": "Announcement link",
        "info": "Optional"
      },
      {
        "type": "color",
        "id": "color_bg",
        "label": "Bar",
        "default": "#7796a8"
      },
      {
        "type": "color",
        "id": "color_text",
        "label": "Text",
        "default": "#fff"
      }
    ]
  }
{% endschema %}
